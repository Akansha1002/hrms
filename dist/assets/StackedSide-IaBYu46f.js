import{r as k,i as f,j as t,a as g,b as T,H as E,S as R,d as H,D as M,e as C,u as v,f as w,h as L,k as A,l as V,m as O}from"./index-Ds58fsWd.js";import{L as U}from"./Logo-BpJzg1Y-.js";import{M as N}from"./index-B6sKVQ5Z.js";import{S as I}from"./ScrollBar-BZB6etJ7.js";import{a as $,N as F,A as P,n as K,b as Y,u as _,c as B,H as G,M as W,U as q}from"./UserProfileDropdown-DDeZx2G5.js";import{V as z}from"./VerticalMenuContent-DxrxqR81.js";import{H as J,a as Q}from"./CloseButton-DWkEJbcD.js";import{L as X}from"./LayoutBase-WVjWsFa0.js";import"./Drawer-D9XVchIC.js";import"./index-ZML-Ogf2.js";import"./isNil-CAF_stq0.js";import"./index-Dro50d70.js";import"./Tooltip-DV8uts-J.js";import"./classNames-_hWUnAlB.js";import"./debounce-DrjznzpD.js";const Z=l=>{const{onChange:a,routeKey:s,activeKeys:r,onSetActiveKey:c,direction:d,navigationTree:i,userAuthority:o,mode:u,selectedMenu:m,t:y,...x}=l,{includedRouteTree:n}=$(i,s),p=({key:e,title:h,menu:D,translateKey:b})=>{a({title:h,menu:D,translateKey:b}),c([e])},S=({key:e})=>{a({}),c([e])};k.useEffect(()=>{n.type!==F&&!f(n)&&a({key:n.key,title:n.title,menu:n.subMenu,translateKey:n.translateKey})},[n.key]);const j=r&&r.length>0?r:f(m)?[]:[n.key];return t.jsxs("div",{...x,children:[t.jsx(g,{to:T.authenticatedEntryPath,className:"stacked-mini-nav-header flex items-center justify-center",style:{height:E},children:t.jsx(U,{imgClass:"max-h-10",mode:u,type:"streamline",className:R})}),t.jsx(I,{autoHide:!0,direction:d,children:t.jsx(N,{className:"px-4 pb-4",defaultActiveKeys:j,children:i.map(e=>t.jsx(P,{authority:e.authority,userAuthority:o,children:t.jsx("div",{title:y(e.translateKey,e.title),children:e.subMenu&&e.subMenu.length>0?t.jsx(N.MenuItem,{eventKey:e.key,className:"mb-2",onSelect:()=>p({key:e.key,title:e.title,menu:e.subMenu,translateKey:e.translateKey}),children:t.jsx("div",{className:"text-2xl",children:K[e.icon]})}):t.jsx(g,{to:e.path,className:"flex items-center h-full w-full",onClick:()=>S({key:e.key}),children:t.jsx(N.MenuItem,{eventKey:e.key,className:"mb-2",children:t.jsx("div",{className:"text-2xl",children:K[e.icon]})})})})},e.key))})})]})},ee=l=>{const{className:a,title:s,menu:r,routeKey:c,onCollapse:d,direction:i,translationSetup:o,userAuthority:u,...m}=l,y=()=>{d()};return t.jsxs("div",{className:H("h-full",a),...m,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:E},children:[t.jsx("h5",{className:"font-bold",children:s}),t.jsxs("button",{type:"button",className:"close-button",onClick:y,children:[i===M&&t.jsx(J,{}),i===C&&t.jsx(Q,{})]})]}),t.jsx(I,{autoHide:!0,direction:i,children:t.jsx(z,{routeKey:c,navigationTree:r,translationSetup:o,userAuthority:u})})]})},te={width:V},se=({translationSetup:l=T.activeNavTranslation})=>{const{t:a}=Y(!l),[s,r]=k.useState({}),[c,d]=k.useState([]),i=v(e=>e.mode),o=v(e=>e.direction),u=w(e=>e.currentRouteKey),m=L(e=>e.user.authority),{larger:y}=_(),x=(e,h)=>`${e}-${h}`,n=e=>{r(e)},p=()=>{r({}),d([])},S=e=>{d(e)},j=()=>{let e={};const h=`${-A}px`;return o===M&&(e={marginLeft:h}),o===C&&(e={marginRight:h}),e};return t.jsx(t.Fragment,{children:y.md&&t.jsxs("div",{className:"stacked-side-nav",children:[t.jsx(Z,{className:`stacked-side-nav-mini ${x("stacked-side-nav-mini",i)}`,style:te,routeKey:u,activeKeys:c,mode:i,direction:o,navigationTree:B,userAuthority:m||[],selectedMenu:s,t:a,onChange:n,onSetActiveKey:S}),t.jsx("div",{className:`stacked-side-nav-secondary ${x("stacked-side-nav-secondary",i)}`,style:{width:A,...f(s)?j():{}},children:!f(s)&&t.jsx(ee,{title:a(s.translateKey,s.title),menu:s.menu,routeKey:u,direction:o,translationSetup:l,userAuthority:m||[],onCollapse:p})})]})})},Se=({children:l})=>{const{larger:a,smaller:s}=_();return t.jsx(X,{type:O,className:"app-layout-stacked-side flex flex-auto flex-col",children:t.jsxs("div",{className:"flex flex-auto min-w-0",children:[a.lg&&t.jsx(se,{}),t.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[t.jsx(G,{className:"shadow dark:shadow-2xl",headerStart:t.jsx(t.Fragment,{children:s.lg&&t.jsx(W,{})}),headerEnd:t.jsx(t.Fragment,{children:t.jsx(q,{hoverable:!1})})}),t.jsx("div",{className:"h-full flex flex-auto flex-col",children:l})]})]})})};export{Se as default};
